graph TD
    A[ðŸ‘¤ User Input<br/>Research Query] --> B[ðŸ¤– Router Agent<br/>Analyze Query Intent]
    
    B --> C{ðŸŽ¯ Decision Logic<br/>Query Type Analysis}
    
    C -->|Model/Architecture Query| D[ðŸ“Š Model Suggestion<br/>Workflow]
    C -->|Research Planning Query| E[ðŸ”¬ Research Planning<br/>Workflow]
    
    D --> F[ðŸ“š arXiv Search]
    F --> G[ðŸ“„ Process PDFs]
    G --> H[ðŸ§  Domain Analysis]
    H --> I[ðŸ’¡ Generate Suggestions]
    I --> J[ðŸ“‹ Model Recommendations]
    
    E --> K[ðŸŽ¯ Generate Problem]
    K --> L[âœ… Validate Problem]
    L --> M{ðŸ¤” Accept Problem?}
    M -->|âœ… Accept| N[ðŸ“¥ Collect Problem]
    M -->|âŒ Reject| K
    N --> O{ðŸ“Š Need More?<br/>< 3 Problems}
    O -->|Yes| K
    O -->|No| P[ðŸ“‹ Create Research Plan]
    
    %% Styling
    classDef userInput fill:#FFE4B5,stroke:#FF8C00,stroke-width:2px
    classDef router fill:#FF6B6B,stroke:#DC143C,stroke-width:2px
    classDef decision fill:#FECA57,stroke:#F39C12,stroke-width:2px
    classDef modelWorkflow fill:#4ECDC4,stroke:#17A2B8,stroke-width:2px
    classDef researchWorkflow fill:#45B7D1,stroke:#007BFF,stroke-width:2px
    classDef output fill:#DDA0DD,stroke:#8A2BE2,stroke-width:2px
    classDef validation fill:#96CEB4,stroke:#28A745,stroke-width:2px
    
    class A userInput
    class B router
    class C,M,O decision
    class D,F,G,H,I modelWorkflow
    class E,K,L,N,P researchWorkflow
    class J,P output
    class L,N validation