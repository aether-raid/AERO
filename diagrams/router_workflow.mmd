graph TD
    A[👤 User Input<br/>Research Query] --> B[🤖 Router Agent<br/>Analyze Query Intent]
    
    B --> C{🎯 Decision Logic<br/>Query Type Analysis}
    
    C -->|Model/Architecture Query| D[📊 Model Suggestion<br/>Workflow]
    C -->|Research Planning Query| E[🔬 Research Planning<br/>Workflow]
    
    D --> F[📚 arXiv Search]
    F --> G[📄 Process PDFs]
    G --> H[🧠 Domain Analysis]
    H --> I[💡 Generate Suggestions]
    I --> J[📋 Model Recommendations]
    
    E --> K[🎯 Generate Problem]
    K --> L[✅ Validate Problem]
    L --> M{🤔 Accept Problem?}
    M -->|✅ Accept| N[📥 Collect Problem]
    M -->|❌ Reject| K
    N --> O{📊 Need More?<br/>< 3 Problems}
    O -->|Yes| K
    O -->|No| P[📋 Create Research Plan]
    
    %% Styling
    classDef userInput fill:#FFE4B5,stroke:#FF8C00,stroke-width:2px
    classDef router fill:#FF6B6B,stroke:#DC143C,stroke-width:2px
    classDef decision fill:#FECA57,stroke:#F39C12,stroke-width:2px
    classDef modelWorkflow fill:#4ECDC4,stroke:#17A2B8,stroke-width:2px
    classDef researchWorkflow fill:#45B7D1,stroke:#007BFF,stroke-width:2px
    classDef output fill:#DDA0DD,stroke:#8A2BE2,stroke-width:2px
    classDef validation fill:#96CEB4,stroke:#28A745,stroke-width:2px
    
    class A userInput
    class B router
    class C,M,O decision
    class D,F,G,H,I modelWorkflow
    class E,K,L,N,P researchWorkflow
    class J,P output
    class L,N validation